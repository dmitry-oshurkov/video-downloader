# Maintainer: Dmitry Oshurkov <video-downloader@oshurkov.name>

pkgname=video-get
pkgver=?
pkgrel=1
pkgdesc="Download online video to local storage for further playing"
arch=('any')
license=('MIT')
depends=("ffmpeg")

package() {

	DIR=$srcdir/../../..

	mkdir -p "$pkgdir/usr/share/applications"
	mkdir -p "$pkgdir/usr/share/pixmaps"

	cp -rT "$DIR/build/jpackage" "$pkgdir/usr/share/"

	echo $'[Desktop Entry]
Name=Video Downloader
Comment=Download online video to local storage for further playing
Exec=/usr/share/'$pkgname'/bin/'$pkgname'
Icon=/usr/share/pixmaps/'$pkgname'.icns
Terminal=false
StartupNotify=true
Type=Application
Categories=AudioVideo;AudioVideoEditing;
' >> "$pkgdir/usr/share/applications/$pkgname.desktop"

	cp "$DIR/setup/video-downloader.icns" "$pkgdir/usr/share/pixmaps/$pkgname.icns"
	cp "$DIR/setup/yt-dlp_linux" "$pkgdir/usr/share/video-get/lib/runtime/bin/yt-dlp_linux"
	cp "$DIR/setup/ffmpeg" "$pkgdir/usr/share/video-get/lib/runtime/bin/ffmpeg"
}
